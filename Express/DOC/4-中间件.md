
## 中间件

app.use()

中间件的功能

* 第一个功能是可以进行权限判断
* 不调用next,就不继续往下走
* 如果写res.end(), 就结束了

```

let express = require('express')
let app = express()


app.use((req,res,next)=>{ //不调用next,就不继续往下走
    console.log('过滤石头')
    res.end('too big')
    next()
})

app.use((req,res,next)=>{ //不调用next,就不继续往下走
    console.log('过滤沙子')
    next()
})

app.get('/user',(req,res)=>{
    res.end('water')
})


app.listen(8099)

```



## 第二个功能是可以对req和res的属性进行扩充

是同一个req

```

let express = require('express')
let app = express()


app.use((req,res,next)=>{ //不调用next,就不继续往下走
    console.log('过滤石头')
    req.stone = 'too big'
    next()
})

app.use((req,res,next)=>{ //不调用next,就不继续往下走
    console.log('过滤沙子')
    req.sand = 'too small'
    next()
})

app.get('/user',(req,res)=>{
    console.log(req.stone,req.sand)   // too big  too small
    res.end('water')
})


app.listen(8099)

```

## 中间件放在要执行路径的上面

